// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           String    @id @default(uuid()) @db.Uuid
  email        String    @unique
  passwordHash String    @map("password_hash")
  fullName     String?   @map("full_name")
  role         String    @default("admin")
  isActive     Boolean   @default(true) @map("is_active")
  lastLoginAt  DateTime? @map("last_login_at")
  createdAt    DateTime  @default(now()) @map("created_at")
  updatedAt    DateTime  @updatedAt @map("updated_at")

  inquiries Inquiry[]

  @@map("users")
}

model Inquiry {
  id           String    @id @default(uuid()) @db.Uuid
  inquiryType  String    @map("inquiry_type")
  fullName     String    @map("full_name")
  email        String
  phone        String?
  company      String?
  country      String
  message      String    @db.Text
  status       String    @default("new")
  leadScore    Int       @default(0) @map("lead_score")
  assignedToId String?   @map("assigned_to") @db.Uuid
  metadata     Json?
  source       String    @default("website")
  ipAddress    String?   @map("ip_address")
  userAgent    String?   @map("user_agent") @db.Text
  createdAt    DateTime  @default(now()) @map("created_at")
  updatedAt    DateTime  @updatedAt @map("updated_at")

  assignedTo User? @relation(fields: [assignedToId], references: [id])

  @@index([status])
  @@index([createdAt])
  @@index([leadScore])
  @@map("inquiries")
}

